{
    "constants": {
        "vm__swap_maxpages": {"type": "sysctl", "sysctl": "vm.swap_maxpages"},
	"vm__pagesize": {"type": "sysctl", "sysctl": "hw.pagesize"}
    },
    "variables": {
        "vm__swap_info": {"type": "sysctl", "sysctl": "vm.swap_info"}
    },
    "derivatives": {
        "total_used": "{vm__swap_info[-1]['xsw_used']}",
        "total_nblks": "min({vm__swap_info[-1]['xsw_nblks']}, {vm__swap_maxpages * vm__pagesize})"
    },
    "incidents": {
        "swap_usage": {
            "description": "Swap Usage Monitor",
            "error": {
		"percent": 90,
                "trigger": "{total_used} > (0.{percent} * {total_nblks})",
                "untrigger": "{total_used} < (0.{(percent - 5)} * {total_nblks})",
                "escalation": "logger 'Swap usage is over {percent}% of '{total_nblks / 1024 / 1024} 'MB'"
            },
            "warn": {
		"percent": 80
            },
            "info": {
		"percent": 60
            }
        }
    }
}
